(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{64237:function(e,s,r){Promise.resolve().then(r.bind(r,66325))},66325:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return _}});var l=r(57437),t=r(2265),a=r(57508),n=r(24033),i=r(10826),d=r(27815),c=r(85754),o=r(45179),x=r(56570),u=r(1657);let m=x.fC,h=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,l.jsx)(x.aV,{ref:s,className:(0,u.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...t})});h.displayName=x.aV.displayName;let g=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,l.jsx)(x.xz,{ref:s,className:(0,u.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...t})});g.displayName=x.xz.displayName;let j=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,l.jsx)(x.VY,{ref:s,className:(0,u.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...t})});j.displayName=x.VY.displayName;var p=r(92457),f=r(25750),v=r(9865),b=r(85790),N=r(49617),y=r(45367),w=r(9883),k=r(92295),Z=r(82549),S=r(87293),C=r(49036);function _(){let{isAuthenticated:e,user:s,loading:r}=(0,a.useAuth)(),x=(0,n.useRouter)(),[u,_]=(0,t.useState)("dashboard"),[z,A]=(0,t.useState)(null),[E,I]=(0,t.useState)([]),[L,O]=(0,t.useState)([]),[U,Y]=(0,t.useState)([]),[D,R]=(0,t.useState)(null),[T,F]=(0,t.useState)(null),[P,V]=(0,t.useState)([]),[Q,M]=(0,t.useState)([]),[q,B]=(0,t.useState)([]),[G,J]=(0,t.useState)(null),[H,W]=(0,t.useState)(null),[K,X]=(0,t.useState)(null),[$,ee]=(0,t.useState)(null),[es,er]=(0,t.useState)({name:"",slug:"",description:"",icon:"\uD83C\uDF10"}),[el,et]=(0,t.useState)({languageId:"",levelNumber:1,title:"",description:""}),[ea,en]=(0,t.useState)(!1),[ei,ed]=(0,t.useState)(!1);(0,t.useEffect)(()=>{r||e&&(null==s?void 0:s.role)==="admin"||x.push("/")},[e,s,r,x]),(0,t.useEffect)(()=>{e&&(null==s?void 0:s.role)==="admin"&&(ec(),eo(),eu(),em(),eh())},[e,s]);let ec=async()=>{try{let e=await i.Z.get("/admin/stats");A(e.data.stats),I(e.data.recentUsers),O(e.data.topUsers||[])}catch(e){console.error("Error fetching stats:",e)}},eo=async()=>{try{let e=await i.Z.get("/admin/users");Y(e.data.users)}catch(e){console.error("Error fetching users:",e)}},ex=async e=>{try{let s=await i.Z.get("/admin/users/".concat(e,"/progress"));F(s.data.progress),R(e)}catch(e){console.error("Error fetching user progress:",e)}},eu=async()=>{try{let e=await i.Z.get("/admin/languages");V(e.data.languages)}catch(e){console.error("Error fetching languages:",e)}},em=async()=>{try{let e=await i.Z.get("/admin/levels");M(e.data.levels)}catch(e){console.error("Error fetching levels:",e)}},eh=async()=>{try{let e=await i.Z.get("/admin/lessons");B(e.data.lessons)}catch(e){console.error("Error fetching lessons:",e)}},eg=async e=>{if(D)try{await i.Z.post("/admin/users/".concat(D,"/unlock-level/").concat(e)),ex(D),ec()}catch(e){console.error("Error unlocking level:",e),alert("Error unlocking level")}},ej=async(e,s)=>{try{await i.Z.put("/admin/users/".concat(e,"/role"),{role:s}),eo(),ec(),J(null)}catch(e){console.error("Error updating user role:",e),alert("Error updating user role")}},ep=async e=>{if(confirm("Are you sure you want to delete this user?"))try{await i.Z.delete("/admin/users/".concat(e)),eo(),ec(),D===e&&(R(null),F(null))}catch(e){console.error("Error deleting user:",e),alert("Error deleting user")}},ef=async()=>{try{await i.Z.post("/admin/languages",es),eu(),ec(),er({name:"",slug:"",description:"",icon:"\uD83C\uDF10"}),en(!1)}catch(r){var e,s;console.error("Error creating language:",r),alert((null===(s=r.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Error creating language")}},ev=async e=>{if(confirm("Are you sure? This will delete all levels and lessons in this language!"))try{await i.Z.delete("/admin/languages/".concat(e)),eu(),em(),eh(),ec()}catch(e){console.error("Error deleting language:",e),alert("Error deleting language")}},eb=async()=>{try{await i.Z.post("/admin/levels",el),em(),eu(),ec(),et({languageId:"",levelNumber:1,title:"",description:""}),ed(!1)}catch(r){var e,s;console.error("Error creating level:",r),alert((null===(s=r.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Error creating level")}},eN=async e=>{if(confirm("Are you sure? This will delete all lessons in this level!"))try{await i.Z.delete("/admin/levels/".concat(e)),em(),eh(),eu(),ec()}catch(e){console.error("Error deleting level:",e),alert("Error deleting level")}},ey=async e=>{if(confirm("Are you sure you want to delete this lesson?"))try{await i.Z.delete("/admin/lessons/".concat(e)),eh(),em(),ec()}catch(e){console.error("Error deleting lesson:",e),alert("Error deleting lesson")}};return r?(0,l.jsx)("div",{className:"container mx-auto px-4 py-16 text-center",children:(0,l.jsx)("p",{children:"Loading..."})}):(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8 min-h-screen bg-gradient-to-br from-[hsl(185_80%_98%)] via-[hsl(210_60%_98%)] to-[hsl(250_60%_98%)] dark:from-[hsl(220_30%_8%)] dark:via-[hsl(230_30%_10%)] dark:to-[hsl(240_30%_12%)]",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold mb-8 bg-gradient-to-r from-[hsl(185_80%_45%)] via-[hsl(210_60%_55%)] to-[hsl(250_60%_55%)] bg-clip-text text-transparent",children:"Admin Dashboard"}),(0,l.jsxs)(m,{value:u,onValueChange:_,className:"w-full",children:[(0,l.jsxs)(h,{className:"grid w-full grid-cols-4 mb-8",children:[(0,l.jsxs)(g,{value:"dashboard",children:[(0,l.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Dashboard"]}),(0,l.jsxs)(g,{value:"users",children:[(0,l.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Users"]}),(0,l.jsxs)(g,{value:"content",children:[(0,l.jsx)(v.Z,{className:"h-4 w-4 mr-2"}),"Content"]}),(0,l.jsxs)(g,{value:"progress",children:[(0,l.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Progress"]})]}),(0,l.jsx)(j,{value:"dashboard",className:"space-y-6",children:z&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,l.jsxs)(d.Zb,{children:[(0,l.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(d.ll,{className:"text-sm font-medium",children:"Total Users"}),(0,l.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(d.aY,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:z.totalUsers}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground",children:[z.newUsersLast30Days," new users (30 days)"]})]})]}),(0,l.jsxs)(d.Zb,{children:[(0,l.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(d.ll,{className:"text-sm font-medium",children:"Active Users"}),(0,l.jsx)(b.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(d.aY,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:z.activeUsers}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active in the last 7 days"})]})]}),(0,l.jsxs)(d.Zb,{children:[(0,l.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(d.ll,{className:"text-sm font-medium",children:"Content"}),(0,l.jsx)(v.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(d.aY,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:z.totalLanguages}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground",children:[z.totalLevels," levels, ",z.totalLessons," lessons"]})]})]}),(0,l.jsxs)(d.Zb,{children:[(0,l.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(d.ll,{className:"text-sm font-medium",children:"Progress"}),(0,l.jsx)(p.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(d.aY,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:z.totalProgress}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Users with progress"})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,l.jsxs)(d.Zb,{className:"bg-blue-50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-800",children:[(0,l.jsx)(d.Ol,{children:(0,l.jsx)(d.ll,{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Average Quiz Score"})}),(0,l.jsxs)(d.aY,{children:[(0,l.jsxs)("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:[z.avgQuizScore,"/10"]}),(0,l.jsxs)("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-2",children:[z.totalQuizAttempts," attempts"]})]})]}),(0,l.jsxs)(d.Zb,{className:"bg-green-50 dark:bg-green-950/20 border-green-200 dark:border-green-800",children:[(0,l.jsx)(d.Ol,{children:(0,l.jsx)(d.ll,{className:"text-sm font-medium text-green-900 dark:text-green-100",children:"Average Code Score"})}),(0,l.jsxs)(d.aY,{children:[(0,l.jsxs)("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[z.avgCodeScore,"/10"]}),(0,l.jsxs)("p",{className:"text-xs text-green-700 dark:text-green-300 mt-2",children:[z.totalCodeAttempts," attempts"]})]})]}),(0,l.jsxs)(d.Zb,{className:"bg-purple-50 dark:bg-purple-950/20 border-purple-200 dark:border-purple-800",children:[(0,l.jsx)(d.Ol,{children:(0,l.jsx)(d.ll,{className:"text-sm font-medium text-purple-900 dark:text-purple-100",children:"Average Total Score"})}),(0,l.jsxs)(d.aY,{children:[(0,l.jsxs)("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:[z.avgTotalScore,"/10"]}),(0,l.jsx)("p",{className:"text-xs text-purple-700 dark:text-purple-300 mt-2",children:"Combined Quiz + Code"})]})]})]}),(0,l.jsxs)(d.Zb,{className:"bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-950/20 dark:to-purple-950/20 border-indigo-200 dark:border-indigo-800",children:[(0,l.jsxs)(d.Ol,{children:[(0,l.jsxs)(d.ll,{className:"text-lg font-semibold text-indigo-900 dark:text-indigo-100 flex items-center gap-2",children:[(0,l.jsx)(b.Z,{className:"h-5 w-5"}),"Grand Total Score"]}),(0,l.jsx)(d.SZ,{className:"text-indigo-700 dark:text-indigo-300",children:"Sum of all quiz and code scores across all users"})]}),(0,l.jsxs)(d.aY,{children:[(0,l.jsx)("div",{className:"text-4xl font-bold text-indigo-600 dark:text-indigo-400 mb-2",children:z.grandTotalScore.toLocaleString()}),(0,l.jsx)("p",{className:"text-sm text-indigo-700 dark:text-indigo-300",children:"Total points earned by all users"})]})]}),(0,l.jsxs)(d.Zb,{children:[(0,l.jsxs)(d.Ol,{children:[(0,l.jsx)(d.ll,{children:"Score Distribution"}),(0,l.jsx)(d.SZ,{children:"Statistics of scores from all lessons"})]}),(0,l.jsx)(d.aY,{children:(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,l.jsxs)("div",{className:"p-4 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-green-900 dark:text-green-100 mb-1",children:"Excellent (9-10)"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:z.scoreDistribution.excellent})]}),(0,l.jsxs)("div",{className:"p-4 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-1",children:"Good (7-8.9)"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:z.scoreDistribution.good})]}),(0,l.jsxs)("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-950/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-yellow-900 dark:text-yellow-100 mb-1",children:"Average (5-6.9)"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:z.scoreDistribution.average})]}),(0,l.jsxs)("div",{className:"p-4 bg-red-50 dark:bg-red-950/20 rounded-lg border border-red-200 dark:border-red-800",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-red-900 dark:text-red-100 mb-1",children:"Poor (<5)"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:z.scoreDistribution.poor})]})]})})]}),L.length>0&&(0,l.jsxs)(d.Zb,{children:[(0,l.jsxs)(d.Ol,{children:[(0,l.jsx)(d.ll,{children:"Top 10 Users"}),(0,l.jsx)(d.SZ,{children:"Sorted by average score"})]}),(0,l.jsx)(d.aY,{children:(0,l.jsx)("div",{className:"space-y-3",children:L.map((e,s)=>{var r;return(0,l.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary font-bold",children:s+1}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold",children:e.name}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email})]})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsxs)("p",{className:"text-lg font-bold text-primary",children:[e.totalAverage.toFixed(1),"/10"]}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.completedLessons," lessons completed"]}),(0,l.jsxs)("p",{className:"text-xs text-primary font-medium mt-1",children:["Total: ",e.totalScore.toFixed(0),"/20"]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-4 gap-2 mt-3 text-xs",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"Quiz:"}),(0,l.jsx)("span",{className:"ml-1 font-medium",children:e.quizAverage.toFixed(1)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"Code:"}),(0,l.jsx)("span",{className:"ml-1 font-medium",children:e.codeAverage.toFixed(1)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"Streak:"}),(0,l.jsxs)("span",{className:"ml-1 font-medium",children:[e.currentStreak," days"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"Time:"}),(0,l.jsxs)("span",{className:"ml-1 font-medium",children:[Math.round(e.totalStudyTime/60),"h"]})]})]})]},(null===(r=e.userId)||void 0===r?void 0:r._id)||s)})})})]}),(0,l.jsxs)(d.Zb,{children:[(0,l.jsx)(d.Ol,{children:(0,l.jsx)(d.ll,{children:"Recent Users"})}),(0,l.jsx)(d.aY,{children:(0,l.jsx)("div",{className:"space-y-2",children:E.map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold",children:e.name}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Joined: ",new Date(e.createdAt).toLocaleDateString("en-US")]})]}),(0,l.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("admin"===e.role?"bg-primary/20 text-primary":"bg-muted"),children:e.role})]},e._id))})})]})]})}),(0,l.jsx)(j,{value:"users",className:"space-y-6",children:(0,l.jsxs)(d.Zb,{children:[(0,l.jsxs)(d.Ol,{children:[(0,l.jsx)(d.ll,{children:"All Users"}),(0,l.jsx)(d.SZ,{children:"Manage user accounts and permissions"})]}),(0,l.jsx)(d.aY,{children:(0,l.jsx)("div",{className:"space-y-2",children:U.map(e=>(0,l.jsx)("div",{className:"p-4 border rounded-lg",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("p",{className:"font-semibold",children:e.name}),G===e._id?(0,l.jsxs)("select",{className:"ml-2 px-2 py-1 border rounded text-sm",defaultValue:e.role,onChange:s=>{ej(e._id,s.target.value)},children:[(0,l.jsx)("option",{value:"user",children:"User"}),(0,l.jsx)("option",{value:"admin",children:"Admin"})]}):(0,l.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("admin"===e.role?"bg-primary/20 text-primary":"bg-muted"),children:e.role})]}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Joined: ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,l.jsx)("div",{className:"flex items-center gap-2",children:G!==e._id&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>{J(e._id),ex(e._id)},children:[(0,l.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,l.jsx)(c.z,{size:"sm",variant:"outline",onClick:()=>ex(e._id),children:"View Progress"}),"admin"!==e.role&&(0,l.jsx)(c.z,{size:"sm",variant:"destructive",onClick:()=>ep(e._id),children:(0,l.jsx)(y.Z,{className:"h-4 w-4"})})]})})]})},e._id))})})]})}),(0,l.jsxs)(j,{value:"content",className:"space-y-6",children:[(0,l.jsxs)(d.Zb,{children:[(0,l.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(d.ll,{children:"Languages"}),(0,l.jsx)(d.SZ,{children:"Manage programming languages"})]}),(0,l.jsxs)(c.z,{onClick:()=>en(!ea),children:[(0,l.jsx)(w.Z,{className:"h-4 w-4 mr-2"}),"Add Language"]})]}),(0,l.jsxs)(d.aY,{children:[ea&&(0,l.jsxs)("div",{className:"mb-4 p-4 border rounded-lg space-y-3",children:[(0,l.jsx)(o.I,{placeholder:"Language Name",value:es.name,onChange:e=>er({...es,name:e.target.value})}),(0,l.jsx)(o.I,{placeholder:"Slug (e.g., web-development)",value:es.slug,onChange:e=>er({...es,slug:e.target.value})}),(0,l.jsx)(o.I,{placeholder:"Description",value:es.description,onChange:e=>er({...es,description:e.target.value})}),(0,l.jsx)(o.I,{placeholder:"Icon (emoji)",value:es.icon,onChange:e=>er({...es,icon:e.target.value})}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(c.z,{onClick:ef,children:[(0,l.jsx)(k.Z,{className:"h-4 w-4 mr-2"}),"Save"]}),(0,l.jsxs)(c.z,{variant:"outline",onClick:()=>en(!1),children:[(0,l.jsx)(Z.Z,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]}),(0,l.jsx)("div",{className:"space-y-2",children:P.map(e=>{var s;return(0,l.jsx)("div",{className:"p-4 border rounded-lg",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("span",{className:"text-2xl",children:e.icon}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold",children:e.name}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(null===(s=e.levels)||void 0===s?void 0:s.length)||0," levels"]})]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(c.z,{size:"sm",variant:"outline",onClick:()=>W(H===e._id?null:e._id),children:(0,l.jsx)(N.Z,{className:"h-4 w-4"})}),(0,l.jsx)(c.z,{size:"sm",variant:"destructive",onClick:()=>ev(e._id),children:(0,l.jsx)(y.Z,{className:"h-4 w-4"})})]})]})},e._id)})})]})]}),(0,l.jsxs)(d.Zb,{children:[(0,l.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(d.ll,{children:"Levels"}),(0,l.jsx)(d.SZ,{children:"Manage learning levels"})]}),(0,l.jsxs)(c.z,{onClick:()=>ed(!ei),children:[(0,l.jsx)(w.Z,{className:"h-4 w-4 mr-2"}),"Add Level"]})]}),(0,l.jsxs)(d.aY,{children:[ei&&(0,l.jsxs)("div",{className:"mb-4 p-4 border rounded-lg space-y-3",children:[(0,l.jsxs)("select",{className:"w-full px-3 py-2 border rounded-md",value:el.languageId,onChange:e=>et({...el,languageId:e.target.value}),children:[(0,l.jsx)("option",{value:"",children:"Select Language"}),P.map(e=>(0,l.jsx)("option",{value:e._id,children:e.name},e._id))]}),(0,l.jsx)(o.I,{type:"number",placeholder:"Level Number",value:el.levelNumber,onChange:e=>et({...el,levelNumber:parseInt(e.target.value)||1})}),(0,l.jsx)(o.I,{placeholder:"Title",value:el.title,onChange:e=>et({...el,title:e.target.value})}),(0,l.jsx)(o.I,{placeholder:"Description",value:el.description,onChange:e=>et({...el,description:e.target.value})}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(c.z,{onClick:eb,children:[(0,l.jsx)(k.Z,{className:"h-4 w-4 mr-2"}),"Save"]}),(0,l.jsxs)(c.z,{variant:"outline",onClick:()=>ed(!1),children:[(0,l.jsx)(Z.Z,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]}),(0,l.jsx)("div",{className:"space-y-2",children:Q.map(e=>{var s,r;return(0,l.jsx)("div",{className:"p-4 border rounded-lg",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"font-semibold",children:["Level ",e.levelNumber,": ",e.title]}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground",children:[null===(s=e.languageId)||void 0===s?void 0:s.name," â€¢ ",(null===(r=e.lessons)||void 0===r?void 0:r.length)||0," lessons"]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(c.z,{size:"sm",variant:"outline",onClick:()=>X(K===e._id?null:e._id),children:(0,l.jsx)(N.Z,{className:"h-4 w-4"})}),(0,l.jsx)(c.z,{size:"sm",variant:"destructive",onClick:()=>eN(e._id),children:(0,l.jsx)(y.Z,{className:"h-4 w-4"})})]})]})},e._id)})})]})]}),(0,l.jsxs)(d.Zb,{children:[(0,l.jsxs)(d.Ol,{children:[(0,l.jsx)(d.ll,{children:"Lessons"}),(0,l.jsx)(d.SZ,{children:"All lessons in the system"})]}),(0,l.jsx)(d.aY,{children:(0,l.jsx)("div",{className:"space-y-2",children:q.map(e=>{var s,r;return(0,l.jsx)("div",{className:"p-4 border rounded-lg",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"font-semibold",children:["Lesson ",e.lessonNumber,": ",e.title]}),(0,l.jsxs)("p",{className:"text-sm text-muted-foreground",children:[null===(s=e.levelId)||void 0===s?void 0:s.title," (Level ",null===(r=e.levelId)||void 0===r?void 0:r.levelNumber,")"]})]}),(0,l.jsx)(c.z,{size:"sm",variant:"destructive",onClick:()=>ey(e._id),children:(0,l.jsx)(y.Z,{className:"h-4 w-4"})})]})},e._id)})})})]})]}),(0,l.jsx)(j,{value:"progress",className:"space-y-6",children:(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,l.jsxs)(d.Zb,{children:[(0,l.jsxs)(d.Ol,{children:[(0,l.jsx)(d.ll,{children:"Select User"}),(0,l.jsx)(d.SZ,{children:"Choose a user to view their progress"})]}),(0,l.jsx)(d.aY,{children:(0,l.jsx)("div",{className:"space-y-2",children:U.map(e=>(0,l.jsxs)("button",{onClick:()=>ex(e._id),className:"w-full text-left p-3 rounded-lg border transition-colors ".concat(D===e._id?"border-primary bg-primary/10":"border-border hover:bg-accent"),children:[(0,l.jsx)("p",{className:"font-semibold",children:e.name}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email})]},e._id))})})]}),T&&(0,l.jsxs)(d.Zb,{children:[(0,l.jsxs)(d.Ol,{children:[(0,l.jsx)(d.ll,{children:"User Progress"}),(0,l.jsxs)(d.SZ,{children:[T.userId.name," (",T.userId.email,")"]})]}),(0,l.jsx)(d.aY,{children:(0,l.jsx)("div",{className:"space-y-4",children:T.levelScores.length>0?T.levelScores.map((e,s)=>(0,l.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"font-semibold",children:["Level ",e.levelId.levelNumber,": ",e.levelId.title]}),(0,l.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Score: ",e.averageScore.toFixed(1),"/10"]})]}),(0,l.jsx)("div",{className:"flex items-center gap-2",children:e.isUnlocked?(0,l.jsxs)("span",{className:"text-green-500 text-sm flex items-center gap-1",children:[(0,l.jsx)(S.Z,{className:"h-4 w-4"}),"Unlocked"]}):(0,l.jsxs)(c.z,{size:"sm",onClick:()=>eg(e.levelId._id),children:[(0,l.jsx)(S.Z,{className:"h-4 w-4 mr-2"}),"Unlock"]})})]}),e.adminApproved&&(0,l.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,l.jsx)(C.Z,{className:"h-3 w-3"}),"Admin approved"]})]},s)):(0,l.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No progress data available"})})})]})]})})]})]})}},85754:function(e,s,r){"use strict";r.d(s,{z:function(){return d}});var l=r(57437),t=r(2265),a=r(96061),n=r(1657);let i=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=t.forwardRef((e,s)=>{let{className:r,variant:t,size:a,...d}=e;return(0,l.jsx)("button",{className:(0,n.cn)(i({variant:t,size:a,className:r})),ref:s,...d})});d.displayName="Button"},27815:function(e,s,r){"use strict";r.d(s,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return n},aY:function(){return o},ll:function(){return d}});var l=r(57437),t=r(2265),a=r(1657);let n=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,l.jsx)("div",{ref:s,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...t})});n.displayName="Card";let i=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,l.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...t})});i.displayName="CardHeader";let d=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,l.jsx)("h3",{ref:s,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...t})});d.displayName="CardTitle";let c=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,l.jsx)("p",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",r),...t})});c.displayName="CardDescription";let o=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,l.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",r),...t})});o.displayName="CardContent",t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,l.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",r),...t})}).displayName="CardFooter"},45179:function(e,s,r){"use strict";r.d(s,{I:function(){return n}});var l=r(57437),t=r(2265),a=r(1657);let n=t.forwardRef((e,s)=>{let{className:r,type:t,...n}=e;return(0,l.jsx)("input",{type:t,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:s,...n})});n.displayName="Input"},57508:function(e,s,r){"use strict";r.r(s),r.d(s,{AuthProvider:function(){return d},useAuth:function(){return c}});var l=r(57437),t=r(2265),a=r(10826),n=r(24033);let i=(0,t.createContext)(void 0);function d(e){let{children:s}=e,[r,d]=(0,t.useState)(null),[c,o]=(0,t.useState)(!0),x=(0,n.useRouter)();(0,t.useEffect)(()=>{u()},[]);let u=async()=>{try{if(localStorage.getItem("token")){let e=await a.Z.get("/auth/me");d(e.data.user)}}catch(e){localStorage.removeItem("token")}finally{o(!1)}},m=async(e,s)=>{let r=await a.Z.post("/auth/login",{email:e,password:s});localStorage.setItem("token",r.data.token),d(r.data.user),x.push("/learn")},h=async(e,s,r)=>{let l=await a.Z.post("/auth/register",{email:e,password:s,name:r});localStorage.setItem("token",l.data.token),d(l.data.user),x.push("/learn")};return(0,l.jsx)(i.Provider,{value:{user:r,loading:c,login:m,register:h,logout:()=>{localStorage.removeItem("token"),d(null),x.push("/")},isAuthenticated:!!r},children:s})}function c(){let e=(0,t.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},10826:function(e,s,r){"use strict";let l=r(54829).Z.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{{let s=localStorage.getItem("token");s&&(e.headers.Authorization="Bearer ".concat(s))}return e}),s.Z=l},1657:function(e,s,r){"use strict";r.d(s,{cn:function(){return a}});var l=r(57042),t=r(74769);function a(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,t.m6)((0,l.W)(s))}}},function(e){e.O(0,[267,573,971,938,744],function(){return e(e.s=64237)}),_N_E=e.O()}]);